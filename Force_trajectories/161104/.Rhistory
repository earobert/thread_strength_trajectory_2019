# This is to graph the instron data from Seattle
# By clicking on the results file we see that test 1 was completed in run 5,
# and test 2 was completed in run 7.
par(mfrow = c(1,1))
setwd("~/Documents/School and jobs/UW Biology/Research/Summer 2016/TEMPXFOOD_Roberts_2016/data/Threads_final/161104")
data_1 <- read.csv(file = "Specimen_RawData_7.csv", header = TRUE,
stringsAsFactors = FALSE, skip = 14)
head(data_1)
names(data_1) <- c("time", "extension", "load")
data <- data_1
plot(data$extension, data$load, pch ='.')
str(data$load)
library(pastecs)
peaks <- turnpoints(data[,"load"], level = 0.1)
summary(peaks)
str(peaks)
plot(peaks)
plot(data[,"load"], type = "l")
points(data[peaks)
peakfn <- function (x, thresh = .001)
{
x <- data$load
thresh = .001
length(data$load)
length(diff(x, na.pad = FALSE))
x_data <- data$extension[1:length(data$extension)-1]
y_data <- diff(x, na.pad = FALSE)
plot(x_data,y_data, pch = '.')
pks <- which(diff(sign(diff(x, na.pad = FALSE)), na.pad = FALSE) < 0) + 2
plot(x[pks - 1] - x[pks])
peaks_x <- (x[pks - 1] - x[pks]) > thresh
peaks_ext <- (data$extension[pks - 1] - data$extension[pks]) > thresh
plot(peaks_ext, peaks_x)
return(pks)
}
peaks_loc <- peakfn(data$load, thresh =.1)
peaks <- cbind(data$extension[peaks_loc], data$load[peaks_loc])
head(peaks)
points(peaks[,1], peaks[,2], pch = 21)
peaksnames(data_1) <- c("time", "extension", "load")
data_2 <- read.csv(file = "Specimen_RawData_7.csv", header = TRUE,
stringsAsFactors = FALSE, skip = 14)
names(data_2) <- c("time", "extension", "load")
head(data_1)
par(mfrow = c(1,2))
data <- data_1
plot(data$extension, data$load, pch ='.')
data <- data_2
plot(data$extension, data$load, pch ='.')
par(mfrow = c(1,1))
setwd("~/Documents/School and jobs/UW Biology/Research/Summer 2016/TEMPXFOOD_Roberts_2016/data/Threads_final/161104")
data_1 <- read.csv(file = "Specimen_RawData_7.csv", header = TRUE,
stringsAsFactors = FALSE, skip = 14)
head(data_1)
names(data_1) <- c("time", "extension", "load")
setwd("~/Documents/School and jobs/UW Biology/Research/Summer 2016/TEMPXFOOD_Roberts_2016/data/Threads_final/161104")
data_1 <- read.csv(file = "Specimen_RawData_7.csv", header = TRUE,
stringsAsFactors = FALSE, skip = 14)
setwd("~/Documents/School and jobs/UW Biology/Research/Summer 2016/TEMPXFOOD_Roberts_2016/data/thread testing/instron_extension_load/161104")
setwd("~/Documents/School and jobs/UW Biology/Research/Summer 2016/TEMPXFOOD_Roberts_2016/data/thread testing/instron_extension_load/161104")
data_1 <- read.csv(file = "Specimen_RawData_7.csv", header = TRUE,
stringsAsFactors = FALSE, skip = 14)
head(data_1)
data_1 <- read.csv(file = "Specimen_RawData_7.csv", header = TRUE,
stringsAsFactors = FALSE, skip = 1)
head(data_1)
data_1 <- read.csv(file = "Specimen_RawData_7.csv", header = TRUE,
stringsAsFactors = FALSE, skip = 4)
data_1 <- read.csv(file = "Specimen_RawData_7.csv", header = TRUE,
stringsAsFactors = FALSE, skip = 4)
data_1 <- read.csv(file = "Specimen_RawData_7.csv", header = TRUE,
stringsAsFactors = FALSE, skip = 4)
head(data_1)
data_1 <- read.csv(file = "Specimen_RawData_7.csv", header = TRUE,
stringsAsFactors = FALSE, skip = 5)
head(data_1)
names(data_1) <- c("time", "extension", "load")
head(data_1)
data <- data_1
plot(data$extension, data$load, pch ='.')
str(data$load)
library(pastecs)
peaks <- turnpoints(data[,"load"], level = 0.1)
summary(peaks)
peaks <- turnpoints(data[,"load"], level = 0.1)
summary(peaks)
str(peaks)
peaks <- turnpoints(data[,"load"], level = 0.1)
x_data <- data$extension[1:length(data$extension)-1]
y_data <- diff(x, na.pad = FALSE)
data_1 <- read.csv(file = "Specimen_RawData_7.csv", header = TRUE,
stringsAsFactors = FALSE, skip = 1)
head(data_1)
data_1 <- read.csv(file = "Specimen_RawData_7.csv", header = TRUE,
stringsAsFactors = FALSE, skip = 0)
head(data_1)
data_1 <- read.csv(file = "Specimen_RawData_8.csv", header = TRUE,
stringsAsFactors = FALSE, skip = 0)
head(data_1)
data_1[2,2]
data_1[2,3]
data_1[1,1]
test_data <- read.csv(file = "Specimen_RawData_8.csv", header = TRUE,
stringsAsFactors = FALSE, skip = 5)
head(data_1)
head(test_data)
names(test_) <- c("time", "extension", "load")
names(test_data) <- c("time", "extension", "load")
head(test_data)
plot(test_data$extension, test_data$load, pch ='.')
data_1 <- read.csv(file = "Specimen_RawData_7.csv", header = TRUE,
stringsAsFactors = FALSE, skip = 0)
head(data_1)
specimen_label <- data_1[1,1]
setwd("~/Documents/School and jobs/UW Biology/Research/Summer 2016/TEMPXFOOD_Roberts_2016/data/thread testing/instron_extension_load/161104")
test_data <- read.csv(file = "Specimen_RawData_8.csv", header = TRUE,
stringsAsFactors = FALSE, skip = 5)
head(test_data)
names(test_data) <- c("time", "extension", "load")
plot(test_data$extension, test_data$load, pch ='.')
plot(test_data$extension, test_data$load, pch ='.')
data_1 <- read.csv(file = "Specimen_RawData_7.csv", header = TRUE,
stringsAsFactors = FALSE, skip = 0)
test_data <- read.csv(file = "Specimen_RawData_7.csv", header = TRUE,
stringsAsFactors = FALSE, skip = 5)
head(test_data)
names(test_data) <- c("time", "extension", "load")
plot(test_data$extension, test_data$load, pch ='.')
FindPeaks<-function(points, MagPre=1, MagPost=-1){
x1<-NULL
x2<-NULL
x3<-NULL
y1<-NULL
y2<-NULL
y3<-NULL
s1<-NULL
s2<-NULL
peaks<-data.frame(x=c(0), y=c(0))
for(i in 2:(length(points$x)-1)){
x1<-points$x[i-1]
x2<-points$x[i]
x3<-points$x[i+1]
y1<-points$y[i-1]
y2<-points$y[i]
y3<-points$y[i+1]
s1<-(y2-y1)/(x2-x1)
s2<-(y3-y2)/(x3-x2)
if (s1>MagPre & s2<MagPost){
if(peaks$y[1]==0){
peaks$x[1]<-x2
peaks$y[1]<-y2
}else{
peaks<-rbind(peaks, data.frame(x=x2, y=y2))
}
}
}
return(peaks)
}
test_peaks<-FindPeaks(points=test_data, MagPre=0.2, MagPost=-.2)
test_peaks<-FindPeaks(points=test_data, MagPre=0.2, MagPost=-0.2)
test_data_xy<-data.frame(x=test_data$extension,y=test_data$load)
test_peaks<-FindPeaks(points=test_data_xy, MagPre=0.2, MagPost=-0.2)
points(test_data_xy, pch=16)
points(test_data_xy, pch=".")
plot(test_data_xy, pch=".")
points(test_peaks, pch="16")
plot(test_data_xy, pch=".")
points(test_peaks, pch=16)
plot(test_data_xy, pch=".", xlim=c(8,10), ylim=c(0.25, 0.5))
points(test_peaks, pch=16)
plot(test_data_xy, pch=".", xlim=c(9,9.25), ylim=c(0.25, 0.3))
points(test_peaks, pch=16)
test_data_xy<-data.frame(x=test_data$extension,y=test_data$load)
test_data_xy<-data.frame(x=test_data$extension,y=test_data$load)
test_peaks<-FindPeaks(points=test_data_xy, MagPre=0.2, MagPost=-0.2)
plot(test_data_xy, pch=".", xlim=c(9,9.25), ylim=c(0.25, 0.3))
points(test_peaks, pch=16)
plot(test_data_xy, pch=".")
locator(test_data_xy)
